<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2.0, minimum-scale=1.0, user-scalable=yes,target-densitydpi=medium-dpi"> 
<script type="text/javascript">

var strlimit = 0;
var endlimit = 0;
var admin;
var search_all = "<%=search_all%>";
$(document).ready(function() {
	// if("<%=connectorDivision%>"  == 'admin'){
	// 	$('#titleNm').text(""); 
	// 	$('#titleNm').addClass("m_admin");
	// }


	// 검색(전공) selectbox
	var search_major_list = tag_place("<%=search_major_list%>");
	$('#search_major').html(search_major_list);
	$("#search_major option").each(function(){
		if($(this).val() == "<%=search_major%>"){
			$(this).attr('selected', true);
		}
	});

	$('.m_admin').click(function(){
		strlimit = 0;
		endlimit = 20;
		num = 0;
		admin = 'admin';
		$("input[name='search_text']").val('');
		
		$("#mbr_limitAra").html("");
		ajax_data(strlimit, endlimit, admin);
	});
	
	// 검색(지역) selectbox
	var search_area_list = tag_place("<%=search_area_list%>");
	$('#search_area').html(search_area_list);
	$("#search_area option").each(function(){
		if($(this).val() == "<%=search_area%>"){
			$(this).attr('selected', true);
		}
	});
	
	// 검색(직책) selectbox
	// var search_position1_list = tag_place("<%=search_position1_list%>");
	// 	$('#search_position1').html(search_position1_list);
	// 	$("#search_position1 option").each(function(){
	// 		if($(this).val() == "<%=search_position1%>"){
	// 			$(this).attr('selected', true);
	// 		}
	// 	});
	$('#search_position1').append("<option value=''>선택</option>");
	$('#search_position1').append("<option value='1'>총동문회 임원</option>");
	$('#search_position1').append("<option value='총동문회 고문'>총동문회 고문</option>");
	$('#search_position1').append("<option value='자문위원'>자문위원</option>");
	$('#search_position1').append("<option value='지역'>지역동문회 임원</option>");
	$('#search_position1').append("<option value='장학회'>동문 장학회</option>");

	
	var num = 0;
	var endNum = $("input[name='jsonlength']").val();	
	
	ajax_data();

	// $('.mbr_view').live("click", function () {
	// 		console.log(this);
	// 		var mbr_no = $(this).attr("mbr_no"); 
			
	// 		$('.member_detail_info_box').each(function(index, value){
	// 			var mbr_no_detail = $(this).attr("mbr_no");
				
	// 			if(mbr_no_detail==mbr_no){
	// 				if ($(this).css("display") == "block") {
	// 					$(this).hide();
	// 					var opensrc = "/images/plus1.png";
	// 					$("#plus_"+mbr_no).attr("src", opensrc);
	// 				} else {
	// 					$(this).show();
	// 					var opensrc = "/images/plus2.png";
	// 					$("#plus_"+mbr_no).attr("src", opensrc);
	// 				}
	// 			}
	// 		});
			
	// 	});


	$('#searchAction').click(function(){
		strlimit = 0;
		endlimit = 20;
		num = 0;
		if("<%=connectorDivision%>"  == 'admin'){
		admin = 'admin'
		}
		var search_txt = $("input[name='search_text']").val();
		//var orgmem_seqNo = $("#orgSeqList").val();
		var orgmem_seqNum = $("#orgmem_seqNum").val();
		$("#mbr_limitAra").html("");
		ajax_data(strlimit, endlimit,admin);
	});




	
	
	
	
	$('#orgSeqList').change(function(){
		strlimit = 0;
		endlimit = 20;
		num = 0;
		if("<%=connectorDivision%>"  == 'admin'){
		admin = 'admin'
		}
		$("input[name='search_text']").val('');
		
		$("#mbr_limitAra").html("");
		ajax_data(strlimit, endlimit,admin);
	});
	
	$('#orgmem_major').change(function(){
		strlimit = 0;
		endlimit = 20;
		num = 0;
		if("<%=connectorDivision%>"  == 'admin'){
		admin = 'admin'
		}
		$("input[name='search_text']").val('');
		
		$("#mbr_limitAra").html("");
		ajax_data(strlimit, endlimit,admin);
	});
	
	// //동적이벤트 적용
	// $('.mbr_view').live("click", function(){
	// 	if($(this).parent().find(".addLi").length){
	// 		if($(this).parent().find(".member_detail").css("display") == "block") $(this).parent().find(".member_detail").hide();
	// 		else $(this).parent().find(".member_detail").show();
	// 	}else{
	// 		ajax_view_data($(this));
	// 	}
	// });
	
	$(window).scroll(function(){
		
		var search_txt = $("input[name='search_text']").val();
		//alert(search_txt);
		//var orgmem_seqNo = $("#orgSeqList").val(); 
		var orgmem_seqNum = $("orgmem_seqNum").val(); 
		//alert("orgmem_seqNo = "+orgmem_seqNo);
		
		endNum = $("input[name='jsonlength']").val();

		if(Math.ceil($(this).scrollTop()) % ($(document).height() - $(window).height()) <= 1){

			 if(strlimit + endlimit < endNum) {
				num++;
				strlimit = num * 20;
				// if("<%=connectorDivision%>"  == 'admin'){
				// 	admin = 'admin'
				// 	}
				
				if(strlimit + endlimit > endNum) {
					endlimit = endNum - strlimit;
					//alert("1strlimit :: " + strlimit + "\nendlimit :: " + endlimit + "\nendNum :: " + endNum + "\nendlimit :: " + endlimit + "\nNumber(endlimit) :: " + endlimit);
					
					if(endlimit > 0) {
						
						ajax_data(strlimit, endlimit,admin);
					}
				} else if(endNum > endlimit){
					endlimit = 20;
					ajax_data(strlimit, endlimit,admin);
				}
				
			} 
		}
		
	});
	$('#member_count').click(function() {
			location.href = "member_list?app_user_search=Y"
		});

	$(".homepage_btn").live('click', function() {
		window.location.href = "/hongbo_board_view?brd_no="+$(this).attr("brd_id");
	});
	
	$(".fileList").live('click', function() {
		$("#img_pop").html('');
		var ext = $(this).attr("fileReview").split('.').pop().toLowerCase();		
		
		if($.inArray(ext, ['gif','png','jpg','jpeg']) == -1) {
		} else {
								
				var imgSrc = $(this).attr("fileReview");
				var item = imgSrc.substring(imgSrc.lastIndexOf('/') +1, imgSrc.length).toLowerCase();
				item = item.replace("."+ ext, "");
							
				var strHtml = '<img src="'+ imgSrc +'" id="'+ item +'" border="0" />';
				$("#img_pop").html(strHtml);
				
				$("#img_pop img").load(function(){
					var maxW = 300;
					var maxH = 386;
					var w = $("#"+ item).width();
					var h = $("#"+ item).height();
					var resizeW = "";
					var resizeH = "";
					
					var basisRatio = maxH / maxW;
					var imgRatio = h / w;

					if(imgRatio > basisRatio){
						if(h > maxH){
							resizeH = maxH;
							resizeW = Math.round((w * resizeH)/h);
						}else{
							resizeW = w;
							resizeH = h;
						}
					}else if (imgRatio < basisRatio){
						if(w > maxW){
							resizeW = maxW;
							resizeH = Math.round((h * resizeW)/w);
						}else{
							resizeW = w;
							resizeH = h;
						}
					}else{
						resizeW = w;
						resizeH = h;
					}
					
					$("#"+ item).css({"width": resizeW+"px", "height":resizeH+"px"});

				});
			
				
				 $.blockUI({ 
		            message: $(".profileImg"),
		            css: { 
		            	top: '15%',
		            	margin: '0 auto',
		            	left : '0',
		            	right : '0',
		            	width: '80%',
		            	cursor : null,
		                border: 'none', 
		                backgroundColor: '#FFF', 
		                '-webkit-border-radius': '10px', 
		                '-moz-border-radius': '10px'
		            },
					onOverlayClick: $.unblockUI
				
				});
				var s = '<div class="dispatch_pop_close" style="border-top: solid 1px gray; height: 30px;"><p class="dispatch_pop_close hand" style=" margin-top: 5px; cursor: pointer;" onclick="imgclose()">닫기</p></div>';
				$('.blockUI').append(s);
			}
	});

});

function imgclose(){
	ynflag=0;
	$.unblockUI();
}
function m_img(num){
	 if($('.member_detail_info_box_'+num+'').css("display") == "none"){
		var opensrc = "/images/plus2.png";
		$("#plus_"+num).attr("src", opensrc);
		$('.member_detail_info_box_'+num+'').show();
	 }else{
		var opensrc = "/images/plus1.png";
		$("#plus_"+num).attr("src", opensrc);
		$('.member_detail_info_box_'+num+'').hide();	
	 }
	

}
function search_areaa(){
		strlimit = 0;
		endlimit = 20;
		num = 0;
		if("<%=connectorDivision%>"  == 'admin'){
			admin = 'admin'
		}
		search_all = '';
		var search_txt = $("input[name='search_text']").val();
		//var orgmem_seqNo = $("#orgSeqList").val();
		var orgmem_seqNum = $("#orgmem_seqNum").val();
		$("#mbr_limitAra").html("");
		ajax_data(strlimit, endlimit,admin,search_all);
}

function callActivity(url){
		var broswerInfo = navigator.userAgent;   
        var filter = "win16|win32|win64|mac|macintel";
         if ( navigator.platform ) { 
              if ( filter.indexOf( navigator.platform.toLowerCase() ) < 0 ) { 
					if(broswerInfo.indexOf("app_flash21_mmate_android")>-1){
                    	window.android.externalUrl(url);
                    }
                    else if(broswerInfo.indexOf("app_flash21_mmate_ios")>-1){
                    	window.open(url, '_blank');
					}
					else{
						window.open(url, '_blank');
					}
              } else { //pc 
            	  window.open(url, '_blank');
              } 
           }
	}
var search_txt = $("input[name='search_text']").val();

function ajax_data(strlimit, endlimit,admin) {
	var search_txt = $("input[name='search_text']").val();
	//var orgmem_seqNo = $("#orgSeqList").val();
	var search_seqNo = $("#search_seqNo").val();
	var search_major = $("#search_major").val();
	var search_position1 = $("#search_position1").val();
	var follow = $("#follow").val();
	$.ajax({
        type:"POST",
        url:"/member_list_data",
        datatype:"json",
		data:{strlimit : strlimit, endlimit : endlimit, search_text : search_txt, search_seqNo : search_seqNo, search_major : search_major, search_position1 : search_position1, app_user_search : "<%=app_user_search%>", connectorDivision : "<%=connectorDivision%>", admin : admin, search_all: search_all, follow:follow},
        success : function(json) {
			// if("<%=connectorDivision%>"  == 'admin'){
			// 	$('#titleNm').text(json.all_count); 
			// }
        	var ment = makeText(json.db_data, json.result);
       		$("#mbr_limitAra").append(ment);
       		//$("#member_count").text(json.db_data_length );
       		$("#member_count").text(json.db_data_length + "(" + json.app_install_count +")");
       		$("input[name='jsonlength']").val(json.db_data_length); 
        },
        beforeSend : function(){
        	$('.wrap-loading').removeClass('display-none');
        },
        complete : function(){
        	$('.wrap-loading').addClass('display-none');
        },
        error : function(xhr, status, error) {
        	//alert("등록된 회원이 없습니다.");
        } 
  	});
}

function ajax_data2(a,b) {
	
	
	var orgm = a;
	var status = b;
	if($(".star"+orgm).hasClass("follow") === true){
		$(".star"+orgm).addClass("follow2");
		$(".star"+orgm).removeClass("follow");
		status = "d";
	}else{
		$(".star"+orgm).removeClass("follow2");
		$(".star"+orgm).addClass("follow");
		status = "c";
	}

	$.ajax({
        type:"POST",
        url:"/member_list_data2",
        datatype:"json",
		data:{orgm : orgm,status:status},
        success : function(json) {
			// if(json == 'csuccess'){
			// 	alert("즐겨찾기에 추가 되었습니다");
			// }else if(json == 'dsuccess'){
			// 	alert("즐겨찾기를 해지하였습니다.");
			// }
			// strlimit = 0;
			// endlimit = 20;
			// num = 0;
			// var search_txt = $("input[name='search_text']").val();
			// //var orgmem_seqNo = $("#orgSeqList").val();
			// var orgmem_seqNum = $("#orgmem_seqNum").val();
			// $("#mbr_limitAra").html("");
			// ajax_data(strlimit, endlimit); 
			},
			error : function(xhr, status, error) {
				alert("실패!!.");
        } 
  	});
}

function mem_setup(){
	mem_ajax_data();
}





function makeText(json) {
		var text = "";
		var orgmem_cate = $("#orgmem_cate").val();
		var search_txt = $("input[name='search_text']").val();

		for (var i = 0; i < json.length; i++) {
			text += '<li class="mbr_view" mbr_no="' + json[i].orgmem_no + '">';
			if (json[i].orgmem_img != '' && json[i].orgmem_img != 'null' && json[i].orgmem_img != null) {
				text += '<a href="javascript:;" class="fileList hand" fileReview="/file/member/' + json[i].orgmem_img + '"><img src="../../../file/member/' + json[i].orgmem_img + '" width="95" height="110" alt="" /></a>';
			} else {
				text += '<div class="member_img"><img src="../../../../images/nomal_img.jpg" width="95" height="110" alt="" /></div>';
			}
			text += '<ul style="width: 80%">';
			/*if (json[i].fcount > 0) {
				text += '<i class="fa fa-star fa-1x follow star'+ json[i].orgmem_no + '" onclick="ajax_data2(\''+json[i].orgmem_no+'\',\''+"d"+'\')")"></i>'; // 즐겨찾기에 있을시
			}else{
				text += '<i class="fa fa-star fa-1x follow2 star'+ json[i].orgmem_no + '" onclick="ajax_data2(\''+json[i].orgmem_no+'\',\''+"c"+'\')"></i>';	// 즐겨찾기에 없을시
			}*/
			if(json[i].dues == 'yes'){
				text += '<i class="fa fa-piggy-bank fa-1x member_money"  onclick="duesShow(this);" value="' + json[i].orgmem_no + ' "></i>';
			}else{
				text += '<i class="fa fa-piggy-bank fa-1x member_money2"  onclick="duesShow2();" value="' + json[i].orgmem_no + ' "></i>';
			}
			if(json[i].topcompany == 'Y'){
			text += '<img src="/images/100_business.png" class="topcompany" alt="100대 기업">';
			}
			text += '<li class="title">';
			if(json[i].etc_position != null && json[i].etc_position1 != null && json[i].etc_position1 != '' && json[i].etc_position != ''){
			if(json[i].orgmem_position2 == '회장' || json[i].orgmem_position2 == '사무국장' || json[i].orgmem_position2 == '본부부회장' || json[i].orgmem_position2 == '동문'){
				text += '<span class="company_name">[ '+ json[i].orgmem_seqNo +''+'회 '+ json[i].orgmem_position2 +' / '  + json[i].etc_position + ' / '  + json[i].etc_position1 + ' ]</span>';
 			} else {
				text += '<span class="company_name">[ '+ json[i].orgmem_position2 +' / '  + json[i].etc_position + '  / '  + json[i].etc_position1 + ' ]</span>';		
			}
			}else if(json[i].etc_position != null && json[i].etc_position != '') {
				if(json[i].orgmem_position2 == '회장' || json[i].orgmem_position2 == '사무국장' || json[i].orgmem_position2 == '본부부회장' || json[i].orgmem_position2 == '동문'){
				text += '<span class="company_name">[ '+ json[i].orgmem_seqNo +''+'회 '+ json[i].orgmem_position2 +' / '  + json[i].etc_position + ' ]</span>';
 			} else {
				text += '<span class="company_name">[ '+ json[i].orgmem_position2 +' / '  + json[i].etc_position + '  ]</span>';		
			}
			}else if(json[i].etc_position1 != null && json[i].etc_position1 != '') {
				if(json[i].orgmem_position2 == '회장' || json[i].orgmem_position2 == '사무국장' || json[i].orgmem_position2 == '본부부회장' || json[i].orgmem_position2 == '동문'){
				text += '<span class="company_name">[ '+ json[i].orgmem_seqNo +''+'회 '+ json[i].orgmem_position2 +'  / '  + json[i].etc_position1 + ' ]</span>';
 			} else {
				text += '<span class="company_name">[ '+ json[i].orgmem_position2 +'  / '  + json[i].etc_position1 + ' ]</span>';		
			}
			}else{
				if(json[i].orgmem_position2 == '회장' || json[i].orgmem_position2 == '사무국장' || json[i].orgmem_position2 == '본부부회장' || json[i].orgmem_position2 == '동문'){
				text += '<span class="company_name">[ '+ json[i].orgmem_seqNo +''+'회 '+ json[i].orgmem_position2 +' ]</span>';
 			} else {
				text += '<span class="company_name">[ '+ json[i].orgmem_position2 +' ]</span>';		
			}
			}
			text += '<span style="font-size:15px; font-weight:bold;">'+ json[i].orgmem_position3 +'</span>';
			if (json[i].device_os == 'android') {
				 text += '<img src="/images/admin/android.png" alt="안드로이드" />';
			} else if (json[i].device_os == 'ios') {
				 text += '<img src="/images/admin/ios.png" alt="iOS" />';
			} else {
				text += '<img src="/images/admin/app_empty.png" alt="" />';
			}
			text += '</li>';
			
			text += '<li class="title" style =" border-bottom: 1px solid #e5e5e5;"><span class="company_business" style="font-size:18px; font-weight:bold;">' + json[i].orgmem_name + '</span>'
			text += '<span class="company_business"> (' + json[i].orgmem_seqNo +''+'회'
			text +=' / ' + json[i].orgmem_major_nm + ')';
			text += '</span></li>';
			/* text += '<li><span style="font-weight:10;">' + json[i].area +"</span> <span style='font-weight:10;'>&nbsp/ "+json[i].orgmem_reg_no +'</span>'; */
			text += '<div onclick="m_img('+ json[i].orgmem_no +')" style=" height: 68%;">';
				text += '<li class="title"><span class="company_business" style="color: #236da0; font-weight: bold;">' + json[i].orgmem_office_nm + '</span>';
			if(json[i].orgmem_position != null && json[i].orgmem_position != '' && json[i].orgmem_position != 'null'){						
				text += '<span style="font-weight:10; white-space: break-spaces;"> / '+ json[i].orgmem_position +'</span>';	
			}
			
			
			text += '</li>';
			if(json[i].orgmem_office_addr1 != null && json[i].orgmem_office_addr1 != '' && json[i].orgmem_office_addr1 != 'null'){
			text += '<li class="title"><span class="company_business"style="width: 100%; white-space:pre-line">' + json[i].orgmem_office_addr1 + json[i].orgmem_office_addr2 + '</span></li>';
			}
			if(json[i].chapter_position1 != null && json[i].chapter_position1 != '' && json[i].chapter_position1 != 'null'){
			text += '<li class="title"><span class="company_business"style="width: 100%; white-space:pre-line; font-weight: bold;">' + json[i].chapter_position1 + '&nbsp' + json[i].chapter_position2 + '&nbsp' + json[i].chapter_position3 +'</span></li>';
			}
			if(json[i].committee_position1 != null && json[i].committee_position1 != '' && json[i].committee_position1 != 'null'){
			text += '<li class="title"><span class="company_business"style="width: 100%; white-space:pre-line">' + json[i].committee_position1 + '&nbsp' + json[i].committee_position2 + '&nbsp' +'('+json[i].committee_position3+')' +'</span></li>';
			}

			
			text += '<img class="m_img" style="width: 20px;  height: 20px; position: absolute; right: 10px; bottom: 10px;" src="/images/plus1.png" id="plus_' + json[i].orgmem_no + '" alt="" />';
			text += '</div>';
			//if(search_all == "내정보"){
			//text += '<div style="width: 60px;  height: 20px; position: absolute; right: 50px; bottom: 10px;"><div class="mem_setup" onclick="mem_setup()">정보수정</div>';}
			text += '</ul>';
			text += '</li>';
			text += '<div class="member_detail_info_box_'+json[i].orgmem_no +' " style="display:none;" mbr_no="' + json[i].orgmem_no + '">';
				
				text += '<div class="member_detail_info">';
					if (json[i].orgmem_tel1 != '' && json[i].orgmem_tel1 != null && json[i].orgmem_tel1 != 'null') {
					text += '<div class="member_detail_info_left">전화</div>';
					text += '<div class=" member_detail_info_right">';
					if(json[i].orgmem_tel1 != null && json[i].orgmem_tel1 != 'null' && json[i].orgmem_tel1 != ''){
						text += '<div class="phone_btn"><a href="tel:'+json[i].orgmem_tel1 + '-' + json[i].orgmem_tel2 + '-' + json[i].orgmem_tel3+'">';
						text += json[i].orgmem_tel1;
						text += '-'+json[i].orgmem_tel2+'-';
						text += json[i].orgmem_tel3;
						text += '</a></div>';
						if("<%=connectorDivision%>"  == 'admin'){
						text += '<div class="call_btn"><a href="tel:'+json[i].orgmem_tel1 + '-' + json[i].orgmem_tel2 + '-' + json[i].orgmem_tel3+'"><i class="fa fa-phone"></i></a></div>';
						}else{
						text += '<div class="call_btn"><i class="fa fa-phone" onclick="phone1()"></i></div>';
						}
						text += '<div class="msg_btn">&nbsp;</div>';

					}
					text += '</div>';
				} else {
				//	text += '<div class="member_detail_info_left">전화</div>';
				}
				text += '</div>';

				if (json[i].orgmem_fax1 != '' && json[i].orgmem_fax1 != null && json[i].orgmem_fax1 != 'null') {
					text += '<div class="member_detail_info">';
						text += '<div class="member_detail_info_left">팩스</div>';
						text += '<div class="member_detail_info_right">';
						if(json[i].orgmem_fax1 != null && json[i].orgmem_fax1 != 'null' && json[i].orgmem_fax1 != ''){
							text += '<div class="phone_btn"><a href="fax:'+json[i].orgmem_fax1 + '-' + json[i].orgmem_fax2 + '-' + json[i].orgmem_fax3+'">';
							text += json[i].orgmem_fax1;
							text += '-';
							text += json[i].orgmem_fax2;
							text += '-';
							text += json[i].orgmem_fax3;
							text += '</a></div>';
						}
						text += '</div>';				
					text += '</div>';
				} else {
					//text += '<div class="member_detail_info_left">Fax&nbsp;</div>';
				}		
				if (json[i].orgmem_phone1 != '' && json[i].orgmem_phone1 != null && json[i].orgmem_phone1 != 'null') {
					text += '<div class="member_detail_info">';
						text += '<div class="member_detail_info_left">휴대폰</div>';
						text += '<div class="member_detail_info_right">';
						if(json[i].orgmem_phone1 != null && json[i].orgmem_phone1 != 'null' && json[i].orgmem_phone1 != ''){
							text += '<div class="phone_btn"><a href="tel:'+json[i].orgmem_phone1 + '-' + json[i].orgmem_phone2 + '-' + json[i].orgmem_phone3+'">';
							text += json[i].orgmem_phone1;
							text += '-****-';
							text += '****';
							// text += json[i].orgmem_phone3;
							text += '</a></div>';
							if("<%=connectorDivision%>"  == 'admin'){
							text += '<div class="call_btn"><a href="tel:'+json[i].orgmem_phone1 + '-' + json[i].orgmem_phone2 + '-' + json[i].orgmem_phone3+'" ><i class="fa fa-phone"></i></a></div>';
							text += '&nbsp;<div class="msg_btn"><a href="sms:'+json[i].orgmem_phone1 + '-' + json[i].orgmem_phone2 + '-' + json[i].orgmem_phone3+'" ><i class="fa fa-envelope"></i></a></div>';
							}else{
							text += '<div class="call_btn"><i class="fa fa-phone" onclick="phone1()"></i></div>';
							text += '&nbsp;<div class="msg_btn"><i class="fa fa-envelope" onclick="sms1()"></i></div>';
							}
						}
						text += '</div>';
					text += '</div>';
				} else {
					//text += '<li><strong style="color:#63004F;">Mobile.</strong>&nbsp;</li>';
				}	


				if (json[i].orgmem_homepage != '' && json[i].orgmem_homepage != null && json[i].orgmem_homepage != 'null') {
					text += '<div class="member_detail_info">';
						text += '<div class="member_detail_info_left">홈페이지</div>';
						text += '<div class="member_detail_info_right">';
							text += '<div class="phone_btn"><a href="'+json[i].orgmem_homepage+'" target="_blank">'+json[i].orgmem_homepage+'  </a></div>';	
							/* text += '<div class="phone_btn"><a href="'+json[i].orgmem_homepage+'">'+json[i].orgmem_homepage+'</a></div>'; */								
						text += '</div>';
					text += '</div>';
				}	
				
				if (json[i].orgmem_email != '' && json[i].orgmem_email != null && json[i].orgmem_email != 'null') {
					text += '<div class="member_detail_info">';
						text += '<div class="member_detail_info_left">E-mail</div>';
						text += '<div class="member_detail_info_right">';
							text += '<div class="phone_btn"><a href="mailto:'+json[i].orgmem_email + '">' + json[i].orgmem_email 
						+ '</a></div>';								
						text += '</div>';
					text += '</div>';
				}	

				if (json[i].orgmem_sns != '' && json[i].orgmem_sns != null && json[i].orgmem_sns != 'null') {
					text += '<div class="member_detail_info">';
						text += '<div class="member_detail_info_left">SNS</div>';
						text += '<div class="member_detail_info_right">';
							text += '<div class="phone_btn"><a href="'+json[i].orgmem_sns+'" target="_blank">'+json[i].orgmem_sns+'  </a></div>';	
							/* text += '<div class="phone_btn"><a href="'+json[i].orgmem_sns+'">'+json[i].orgmem_sns+'</a></div>';	 */							
						text += '</div>';
						
					text += '</div>';
				}	

				if (json[i].link1 != '' && json[i].link1 != null && json[i].link1 != 'null') {
					text += '<div class="member_detail_info">';
						text += '<div class="member_detail_info_left">홍보동영상</div>';
						text += '<div class="member_detail_info_right">';
							text += '<div class="phone_btn"><a href="'+json[i].link2+'" target="_blank">'+json[i].link2+'  </a></div>';	
						text += '</div>';
					text += '</div>';
				}	
				if (json[i].link2 != '' && json[i].link2 != null  && json[i].link2 != 'null') {
					text += '<div class="member_detail_info">';
						text += '<div class="member_detail_info_left">지식백과</div>';
						text += '<div class="member_detail_info_right">';
							text += '<div class="phone_btn"><a href="'+json[i].link1+'" target="_blank">'+json[i].link1+'   </a></div>';					
						text += '</div>';
					text += '</div>';
				}	
				
				if (json[i].remrk != '' && json[i].remrk != null && json[i].remrk != 'null') {
					text += '<div class="member_detail_info">';
						text += '<div class="member_detail_info_left">비고</div>';
						text += '<div class="member_detail_info_right">';
							text += '<div class="phone_btn introduce" style="width: 100%;">'+json[i].remrk+'</div>';								
						text += '</div>';
					text += '</div>';
				}	


				if (json[i].business_field != '' && json[i].business_field != null && json[i].business_field != 'null') {
					text += '<div class="member_detail_info">';
						text += '<div class="member_detail_info_left">사업내용</div>';
						text += '<div class="member_detail_info_right">';
							text += '<div class="phone_btn introduce" style="width: 100%;">'+json[i].business_field+'</div>';								
						text += '</div>';
					text += '</div>';
				}	

				if (json[i].company_intro != '' && json[i].company_intro != null) {
					text += '<div class="member_detail_info">';
						text += '<div class="member_detail_info_left">회사소개자료</div>';
						text += '<div class="member_detail_info_right">';
							text += '<div class="phone_btn introduce" style="width: 100%;"><a href="../../../file/member/'+json[i].company_intro+'" download>'+json[i].company_intro+'</a></div>';								
						text += '</div>';
					text += '</div>';
				}	
				
				
				
			
				
				/* if (json[i].company_img1 != ''&&json[i].company_img1 != null || json[i].company_img2 != '' && json[i].company_img2 !=null)  {
					text += '<div class="member_company_img_top">회사 사진</div>';
				} */
				if (json[i].business_card != '' && json[i].business_card != null){
				text += '<div class="business_card">';
				text += '<img src="../../../file/member/' + json[i].business_card + '"/>';
				text += '</div>'
				}
				 if (json[i].company_img1 != ''&&json[i].company_img1 != null || json[i].company_img2 != '' && json[i].company_img2 !=null)  {
					console.log(json[i].company_img1);
					text += '<div class="member_company_img_bottom">';
					text += '<div class="company_img_1">';
					if (json[i].company_img1 != '' && json[i].company_img1 != null)
						text += '<img src="../../../file/member/' + json[i].company_img1 + '"/>';
					text += '</div>';
					text += '<div class="company_img_2">';
					if (json[i].company_img2 != '' && json[i].company_img2 != null)
						text += '<img src="../../../file/member/' + json[i].company_img2 + '"/>';
					text += '</div>';
					text += '</div>';
				 }
				 if (json[i].company_img3 != ''&&json[i].company_img3 != null || json[i].company_img4 != '' && json[i].company_img4 !=null) {
					text += '<div class="member_company_img_bottom">';
					text += '<div class="company_img_3">';
					if (json[i].company_img3 != '' && json[i].company_img3 != null)
						text += '<img src="../../../file/member/' + json[i].company_img3 + '"/>';
					text += '</div>';
					text += '<div class="company_img_4">';
					if (json[i].company_img4 != '' && json[i].company_img4 != null)
						text += '<img src="../../../file/member/' + json[i].company_img4 + '"/>';
					text += '</div>';
					text += '</div>';
					/* <img src="../../../images/footer01_on.png" /> */

				} 
			text += '</div>';
			if(search_all == "내정보"){
				text += '<div style="text-align: center;margin-top: 0.5rem;" class="banner_m" onclick="mem_setup()">정보수정</div>';}
		}
		if (json.length == 0)
			text += '<p align="center"></p>';
			// text += '<p align="center">검색회원정보가 없습니다.</p>';
		return text;
	}

// function ajax_view_data(thisArea) {
// 	var mbr_no = thisArea.attr('mbr_no');
	
// 	$.ajax({
//         type:"POST",
//         url:"/member_view",
//         datatype:"json",
//         data:{orgmem_no : mbr_no},
//         success : function(result) {
        	
//         	var html = "";
        	
//         	$(result.data).each(function(key, data){
//         		var orgmem_major_txt = data.orgmem_major_txt==null ? '' : data.orgmem_major_txt;
// 				var orgmem_position = data.orgmem_position==null ? '' : data.orgmem_position;
		
//         		html += '<li class="addLi"><strong>상세전공</strong>' + orgmem_major_txt + '</li>';
//         		html += '<li class="addLi"><strong>부서&직위</strong>' + orgmem_position + '</li>';
//         		//html += '<li class="addLi"><strong>검색어 </strong>' + data.orgmem_keyword + '</li>';
//         	});
        	
//         	thisArea.parent().find(".member_detail").show().find("ul").append(html);
//         },
//         error : function(xhr, status, error) {
//         	alert("회원정보 로드에 실패하였습니다.");
//         } 
//   	});
// }	

/*function m_plus(){
	alert("123");
	var mbr_no = $(this).attr("mbr_no"); 
			
			$('.member_detail_info_box').each(function(index, value){
				var mbr_no_detail = $(this).attr("mbr_no");
				
				if(mbr_no_detail==mbr_no){
					if ($(this).css("display") == "block") {
						$(this).hide();
						var opensrc = "/images/plus1.png";
						$("#plus_"+mbr_no).attr("src", opensrc);
					} else {
						$(this).show();
						var opensrc = "/images/plus2.png";
						$("#plus_"+mbr_no).attr("src", opensrc);
					}
				}
			});
}*/

function phone1(){
	alert("통화를 원하시면 대구공고 총동문회로 연락 바랍니다.\n(사무처장 59회 추승철: 010-3803-9128)");
}
function sms1(){
	alert("문자를 원하시면 대구공고 총동문회로 연락 바랍니다.\n(사무처장 59회 추승철: 010-3803-9128)");
}
function duesHide(){
	$(".dues_table_wrap").hide();
	$('body').css("overflow","auto");
}
function duesShow(param){
	console.log(param);
	var PARAM = new Object();
	PARAM.orgmem_no = $(param).attr("value");
	console.log(PARAM);
	$("#duesBody").empty();
	$.ajax({
		url: "/duse_info"
		, data: PARAM
		, type: "POST"
		, success: function (result) {
			$('body').css("overflow","hidden");
			console.log(result);

			var html = "";

			for(var idx=0; idx<result.length; idx++){
				var item = result[idx];
				item.price=addComma(item.price);

				html +="<tr> ";
				html +="<td>"+item.year+'/'+item.month+"</td> ";
				html +="<td>"+item.pay_option+"</td> ";
				html +="<td style='text-align: right;'>"+item.price+"</td> ";
				html +="</tr> ";

			}

			$("#duesBody").append(html);
			$(".dues_table_wrap").show();
		}
	});
}

function duesShow2(){
	alert("입급내역이 없습니다");
}

function addComma(value){
        value = value.replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        return value; 
    }


</script>


<!-- 컨텐츠 -->
<div id="consoleLog"></div>
<div class="search_container">
<form action="" id="memberForm" name="memberForm" method="post" onsubmit="return false;" autocomplete="off">
	<input type="hidden" name="orgmem_div" value=""/>
	<input type="hidden" name="orgmem_no" value=""/>
	<input type="hidden" name="auth" value="user"/>
	<input type="hidden" name="menuNum" value="1" />
	<input type="hidden" name="jsonlength" value="<%=db_data_length %>" />
	<input type="hidden" name="endlimit" value="" />
	<input type="hidden" name="follow"  id ="follow" value=""/>
	<div class="search_wrap">
		<select style="width:max-content" name="search_position1" id="search_position1" onchange="search_areaa()"></select>		
		<select name="search_seqNo" id="search_seqNo" onchange="search_areaa()">
			<option value="" >기수</option>
			<% for(var k=87; k>=16; k--){ %>	
				<option value="<%=k%>" <%if(search_seqNo==k){%>selected="selected"<%}%>><%=k%>회</option>
			<% } %>
			<!--option value="0000">재일동문</option-->
		</select>
		<select name="search_major" id="search_major" onchange="search_areaa()">
		</select>	
		<div class="search_field">
			<input type="text" name="search_text" value="<%=search_text %>"  style="ime-mode:active; "/>
			<button id="searchAction"><i class="fa fa-search fa-1x"></i></button>
		</div>
	</div>

	<div class="member_list">
		<ul class="mbr_limit" id="mbr_limitAra"></ul>
	</div>
	<div class="wrap-loading display-none">
		<div><img src="../../../images/ajax-loader.gif" /></div>
	</div>
</form>

</div>

<div class="profileImg setup_popup" style="display:none;">
	<p class="btn_setup" id="img_pop"></p>	
</div>
<!-- <div class="imgclose" style="background-color: rgb(255, 255, 255);border-top: solid 1px gray;height: 30px; display: none;">
	<p class="dispatch_pop_close hand" style="margin-top: 5px; cursor: pointer;">닫기</p>
</div> -->



<div class="dues_table_wrap" style="display: none;">
	<div class="duesTable">
		<div class="dus_table_wrap">
			<table>
			<colgroup>
				<col width="33%">
				<col width="33%">
				<col width="33%">
			</colgroup>
			<thead>
				<tr>
					<th>납부년월</th>
					<th>납부내역</th>
					<th>금액</th>
				</tr>
			</thead>
			<tbody id="duesBody">
				

			</tbody>
		</table>
		</div>
		<div class="pop_btn">
			<input type="button" value="닫기" onclick="duesHide();">
		</div>
		
	</div>
</div>
